<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Navigation Framework - Complete Demo</title>
    
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- TV Navigation Framework CSS -->
    <link href="https://cdn.jsdelivr.net/gh/cmrodican/bootstrap-addons/tv-navigation-framework/tv-navigation-framework.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/cmrodican/bootstrap-addons/tv-navigation-framework/tv-navigation-framework-themes.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        body {
            padding-top: 70px; /* Account for fixed navbar */
        }
        .demo-section {
            margin-bottom: 3rem;
            padding: 2rem;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
        }
        .theme-selector {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1000;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .movie-card {
            aspect-ratio: 16/9;
            background: linear-gradient(45deg, #333, #666);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        .control-demo {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 20px auto;
        }
        .stats-card {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }
        .demo-keyboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }
    </style>
</head>
<body class="tv-nav-enabled">

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand tv-nav-focusable" href="#" data-tv-nav="home">
                <i class="fas fa-tv me-2"></i>TV Navigation Demo
            </a>
            <button class="navbar-toggler tv-nav-focusable" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link tv-nav-focusable" href="#features">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link tv-nav-focusable" href="#navigation">Navigation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link tv-nav-focusable" href="#components">Components</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link tv-nav-focusable" href="#forms">Forms</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link tv-nav-focusable" href="#media">Media</a>
                    </li>
                </ul>
                <div class="navbar-nav">
                    <button class="btn btn-outline-primary btn-sm tv-nav-focusable me-2" onclick="showHelp()">
                        <i class="fas fa-question-circle"></i> Help
                    </button>
                    <button class="btn btn-outline-success btn-sm tv-nav-focusable" onclick="toggleAudio()">
                        <i class="fas fa-volume-up"></i> Audio
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Theme Selector -->
    <div class="theme-selector">
        <h6 class="text-white mb-2">Theme</h6>
        <select class="form-select form-select-sm tv-nav-focusable" id="themeSelector" onchange="changeTheme(this.value)">
            <option value="">Default</option>
            <option value="tv-nav-theme-netflix">Netflix</option>
            <option value="tv-nav-theme-prime">Amazon Prime</option>
            <option value="tv-nav-theme-disney">Disney+</option>
            <option value="tv-nav-theme-hulu">Hulu</option>
            <option value="tv-nav-theme-hbo">HBO Max</option>
            <option value="tv-nav-theme-youtube">YouTube</option>
            <option value="tv-nav-theme-playstation">PlayStation</option>
            <option value="tv-nav-theme-xbox">Xbox</option>
            <option value="tv-nav-theme-nintendo">Nintendo</option>
            <option value="tv-nav-theme-samsung">Samsung</option>
            <option value="tv-nav-theme-lg">LG webOS</option>
            <option value="tv-nav-theme-retro">Retro Gaming</option>
            <option value="tv-nav-theme-neon">80s Neon</option>
            <option value="tv-nav-theme-contrast-light">High Contrast Light</option>
            <option value="tv-nav-theme-contrast-dark">High Contrast Dark</option>
        </select>
    </div>

    <div class="container-fluid">
        
        <!-- Hero Section -->
        <section class="demo-section text-center">
            <h1 class="display-4 mb-4">TV Navigation Framework</h1>
            <p class="lead mb-4">Navigate with remote control, gamepad, or keyboard</p>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="alert alert-info">
                        <h5><i class="fas fa-gamepad me-2"></i>Quick Start Guide</h5>
                        <p class="mb-2"><strong>Navigation:</strong> Use arrow keys, WASD, or gamepad to move between elements</p>
                        <p class="mb-2"><strong>Select:</strong> Press Enter, Space, or gamepad A button</p>
                        <p class="mb-2"><strong>Back:</strong> Press Escape, Backspace, or gamepad B button</p>
                        <p class="mb-0"><strong>Help:</strong> Press F1 or click the Help button</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <button class="btn btn-primary btn-lg tv-nav-focusable w-100" onclick="showWelcomeMessage()">
                        <i class="fas fa-play me-2"></i>Start Demo
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-secondary btn-lg tv-nav-focusable w-100" onclick="toggleKeyboard()">
                        <i class="fas fa-keyboard me-2"></i>Show Keyboard
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-info btn-lg tv-nav-focusable w-100" onclick="showFeatureDemo()">
                        <i class="fas fa-star me-2"></i>Features
                    </button>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="demo-section">
            <h2 class="mb-4"><i class="fas fa-list-check me-2"></i>Framework Features</h2>
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="stats-card tv-nav-focusable">
                        <i class="fas fa-gamepad fa-2x mb-2 text-primary"></i>
                        <h5>Gamepad Support</h5>
                        <p class="small">Full Xbox/PlayStation controller compatibility</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="stats-card tv-nav-focusable">
                        <i class="fas fa-volume-up fa-2x mb-2 text-success"></i>
                        <h5>Audio Feedback</h5>
                        <p class="small">Spatial audio cues for navigation</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="stats-card tv-nav-focusable">
                        <i class="fas fa-palette fa-2x mb-2 text-warning"></i>
                        <h5>15+ Themes</h5>
                        <p class="small">Netflix, PlayStation, Xbox and more</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-3">
                    <div class="stats-card tv-nav-focusable">
                        <i class="fas fa-universal-access fa-2x mb-2 text-info"></i>
                        <h5>Accessibility</h5>
                        <p class="small">WCAG compliant with screen reader support</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Navigation Demo -->
        <section id="navigation" class="demo-section">
            <h2 class="mb-4"><i class="fas fa-arrows-alt me-2"></i>Navigation Demo</h2>
            <div class="row">
                <div class="col-md-6">
                    <h4>Directional Navigation</h4>
                    <p>Use arrow keys or gamepad to navigate between these buttons:</p>
                    <div class="control-demo">
                        <div></div>
                        <button class="btn btn-outline-primary tv-nav-focusable">Up</button>
                        <div></div>
                        <button class="btn btn-outline-primary tv-nav-focusable">Left</button>
                        <button class="btn btn-primary tv-nav-focusable">Center</button>
                        <button class="btn btn-outline-primary tv-nav-focusable">Right</button>
                        <div></div>
                        <button class="btn btn-outline-primary tv-nav-focusable">Down</button>
                        <div></div>
                    </div>
                </div>
                <div class="col-md-6">
                    <h4>Smart Navigation</h4>
                    <p>The framework automatically finds the best next element:</p>
                    <div class="demo-keyboard">
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">1</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">2</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">3</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">4</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">Q</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">W</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">E</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">R</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">A</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">S</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">D</button>
                        <button class="btn btn-sm btn-outline-secondary tv-nav-focusable">F</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Components Section -->
        <section id="components" class="demo-section">
            <h2 class="mb-4"><i class="fas fa-puzzle-piece me-2"></i>Interactive Components</h2>
            
            <!-- Cards -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card tv-nav-focusable" onclick="showToast('Card 1 selected!', 'success')">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Movie Card 1</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Action movie with great special effects and storyline.</p>
                            <small class="text-muted">★★★★☆ 4.2/5</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card tv-nav-focusable" onclick="showToast('Card 2 selected!', 'success')">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Movie Card 2</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Comedy film perfect for family movie night.</p>
                            <small class="text-muted">★★★★★ 4.8/5</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card tv-nav-focusable" onclick="showToast('Card 3 selected!', 'success')">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Movie Card 3</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Thriller that will keep you on the edge of your seat.</p>
                            <small class="text-muted">★★★☆☆ 3.9/5</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Button Groups -->
            <h4>Button Groups</h4>
            <div class="btn-group mb-3" role="group">
                <button class="btn btn-outline-primary tv-nav-focusable" onclick="showToast('Play selected', 'info')">
                    <i class="fas fa-play"></i> Play
                </button>
                <button class="btn btn-outline-primary tv-nav-focusable" onclick="showToast('Pause selected', 'info')">
                    <i class="fas fa-pause"></i> Pause
                </button>
                <button class="btn btn-outline-primary tv-nav-focusable" onclick="showToast('Stop selected', 'info')">
                    <i class="fas fa-stop"></i> Stop
                </button>
                <button class="btn btn-outline-primary tv-nav-focusable" onclick="showToast('Next selected', 'info')">
                    <i class="fas fa-forward"></i> Next
                </button>
            </div>

            <!-- List Groups -->
            <h4>Navigation Lists</h4>
            <div class="row">
                <div class="col-md-6">
                    <ul class="list-group">
                        <li class="list-group-item tv-nav-focusable" onclick="showToast('Home selected', 'info')">
                            <i class="fas fa-home me-2"></i>Home
                        </li>
                        <li class="list-group-item tv-nav-focusable" onclick="showToast('Movies selected', 'info')">
                            <i class="fas fa-film me-2"></i>Movies
                        </li>
                        <li class="list-group-item tv-nav-focusable" onclick="showToast('TV Shows selected', 'info')">
                            <i class="fas fa-tv me-2"></i>TV Shows
                        </li>
                        <li class="list-group-item tv-nav-focusable" onclick="showToast('Settings selected', 'info')">
                            <i class="fas fa-cog me-2"></i>Settings
                        </li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <nav class="nav nav-pills flex-column">
                        <a class="nav-link tv-nav-focusable" onclick="showToast('Profile selected', 'info')">
                            <i class="fas fa-user me-2"></i>Profile
                        </a>
                        <a class="nav-link tv-nav-focusable" onclick="showToast('Library selected', 'info')">
                            <i class="fas fa-bookmark me-2"></i>My Library
                        </a>
                        <a class="nav-link tv-nav-focusable" onclick="showToast('Downloads selected', 'info')">
                            <i class="fas fa-download me-2"></i>Downloads
                        </a>
                        <a class="nav-link tv-nav-focusable" onclick="showToast('History selected', 'info')">
                            <i class="fas fa-history me-2"></i>Watch History
                        </a>
                    </nav>
                </div>
            </div>
        </section>

        <!-- Forms Section -->
        <section id="forms" class="demo-section">
            <h2 class="mb-4"><i class="fas fa-edit me-2"></i>Form Controls</h2>
            <div class="row">
                <div class="col-md-6">
                    <form>
                        <div class="mb-3">
                            <label for="username" class="form-label">Username</label>
                            <input type="text" class="form-control tv-nav-focusable" id="username" placeholder="Enter username">
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control tv-nav-focusable" id="email" placeholder="Enter email">
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" class="form-control tv-nav-focusable" id="password" placeholder="Enter password">
                        </div>
                        <div class="mb-3">
                            <label for="country" class="form-label">Country</label>
                            <select class="form-select tv-nav-focusable" id="country">
                                <option>Choose country...</option>
                                <option>United States</option>
                                <option>United Kingdom</option>
                                <option>Canada</option>
                                <option>Australia</option>
                                <option>Germany</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="bio" class="form-label">Bio</label>
                            <textarea class="form-control tv-nav-focusable" id="bio" rows="3" placeholder="Tell us about yourself..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="col-md-6">
                    <h4>Preferences</h4>
                    <div class="form-check mb-2">
                        <input class="form-check-input tv-nav-focusable" type="checkbox" id="notifications">
                        <label class="form-check-label" for="notifications">
                            Email notifications
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input tv-nav-focusable" type="checkbox" id="newsletter">
                        <label class="form-check-label" for="newsletter">
                            Subscribe to newsletter
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input tv-nav-focusable" type="checkbox" id="marketing">
                        <label class="form-check-label" for="marketing">
                            Marketing communications
                        </label>
                    </div>
                    
                    <h5>Plan Type</h5>
                    <div class="form-check mb-2">
                        <input class="form-check-input tv-nav-focusable" type="radio" name="plan" id="basic">
                        <label class="form-check-label" for="basic">
                            Basic Plan ($9.99/month)
                        </label>
                    </div>
                    <div class="form-check mb-2">
                        <input class="form-check-input tv-nav-focusable" type="radio" name="plan" id="premium">
                        <label class="form-check-label" for="premium">
                            Premium Plan ($14.99/month)
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input tv-nav-focusable" type="radio" name="plan" id="family">
                        <label class="form-check-label" for="family">
                            Family Plan ($19.99/month)
                        </label>
                    </div>
                    
                    <button class="btn btn-success tv-nav-focusable me-2" onclick="showToast('Profile saved!', 'success')">
                        <i class="fas fa-save me-2"></i>Save Profile
                    </button>
                    <button class="btn btn-secondary tv-nav-focusable" onclick="showToast('Changes cancelled', 'info')">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                </div>
            </div>
        </section>

        <!-- Media Grid Section -->
        <section id="media" class="demo-section">
            <h2 class="mb-4"><i class="fas fa-th me-2"></i>Media Grid Navigation</h2>
            <p>Navigate through this grid using arrow keys or gamepad:</p>
            <div class="game-grid">
                <div class="card tv-nav-focusable" onclick="showToast('Movie 1 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-film fa-2x mb-2"></i>
                            <div>Action Movie</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 2 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-comedy fa-2x mb-2"></i>
                            <div>Comedy</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 3 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-magic fa-2x mb-2"></i>
                            <div>Fantasy</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 4 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-rocket fa-2x mb-2"></i>
                            <div>Sci-Fi</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 5 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-heart fa-2x mb-2"></i>
                            <div>Romance</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 6 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-mask fa-2x mb-2"></i>
                            <div>Horror</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 7 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-baby fa-2x mb-2"></i>
                            <div>Family</div>
                        </div>
                    </div>
                </div>
                <div class="card tv-nav-focusable" onclick="showToast('Movie 8 selected', 'success')">
                    <div class="movie-card">
                        <div class="text-center">
                            <i class="fas fa-book fa-2x mb-2"></i>
                            <div>Documentary</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Modal Demo -->
        <section class="demo-section">
            <h2 class="mb-4"><i class="fas fa-window-maximize me-2"></i>Modal Navigation</h2>
            <p>Test modal dialogs with TV navigation:</p>
            <button type="button" class="btn btn-primary tv-nav-focusable" data-bs-toggle="modal" data-bs-target="#demoModal">
                <i class="fas fa-external-link-alt me-2"></i>Open Modal
            </button>
        </section>

        <!-- Controls Section -->
        <section class="demo-section">
            <h2 class="mb-4"><i class="fas fa-sliders-h me-2"></i>Framework Controls</h2>
            <div class="row">
                <div class="col-md-3">
                    <button class="btn btn-outline-primary w-100 tv-nav-focusable mb-2" onclick="showHelp()">
                        <i class="fas fa-question-circle me-2"></i>Show Help
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-outline-success w-100 tv-nav-focusable mb-2" onclick="toggleKeyboard()">
                        <i class="fas fa-keyboard me-2"></i>Toggle Keyboard
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-outline-warning w-100 tv-nav-focusable mb-2" onclick="toggleAudio()">
                        <i class="fas fa-volume-up me-2"></i>Toggle Audio
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-outline-info w-100 tv-nav-focusable mb-2" onclick="goHome()">
                        <i class="fas fa-home me-2"></i>Go Home
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Demo Modal -->
    <div class="modal fade" id="demoModal" tabindex="-1" aria-labelledby="demoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="demoModalLabel">TV Navigation Modal</h5>
                    <button type="button" class="btn-close tv-nav-focusable" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>This modal demonstrates TV navigation within modal dialogs.</p>
                    <div class="mb-3">
                        <label for="modalInput" class="form-label">Sample Input</label>
                        <input type="text" class="form-control tv-nav-focusable" id="modalInput" placeholder="Type something...">
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input tv-nav-focusable" type="checkbox" id="modalCheck">
                        <label class="form-check-label" for="modalCheck">
                            I agree to the terms
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary tv-nav-focusable" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary tv-nav-focusable" onclick="showToast('Modal confirmed!', 'success')" data-bs-dismiss="modal">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- TV Navigation Framework JS -->
    <script src="https://cdn.jsdelivr.net/gh/cmrodican/bootstrap-addons/tv-navigation-framework/tv-navigation-framework.min.js"></script>

    <script>
        // Global reference to the TV Navigation Framework
        let tvNav;

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing TV Navigation...');
            
            // Wait for the framework to load
            setTimeout(() => {
                // Check if framework auto-initialized
                tvNav = window.tvNav;
                
                if (!tvNav && window.TVNavigationFramework) {
                    console.log('Creating new TV Navigation instance...');
                    tvNav = new window.TVNavigationFramework({
                        enableAudio: true,
                        enableVisualFeedback: true,
                        enableKeyboard: true,
                        enableGamepad: true,
                        enableBreadcrumbs: true,
                        enableHelp: true,
                        enableToasts: true,
                        audioVolume: 0.3,
                        navigationDelay: 150,
                        autoInitialize: true
                    });
                    window.tvNav = tvNav; // Store globally
                }
                
                if (tvNav) {
                    console.log('TV Navigation Framework initialized!', tvNav);
                    
                    // Ensure it's initialized
                    if (!tvNav.initialized) {
                        tvNav.init().then(() => {
                            console.log('TV Navigation manually initialized');
                            initializeDemo();
                        }).catch(err => {
                            console.error('Failed to initialize TV Navigation:', err);
                        });
                    } else {
                        initializeDemo();
                    }
                } else {
                    console.error('TV Navigation Framework not available');
                }
            }, 500); // Give the framework time to load
        });

        function initializeDemo() {
            console.log('Initializing demo...');
            
            // Listen for framework events
            document.addEventListener('tv-nav-ready', function(e) {
                console.log('TV Navigation Framework ready!', e.detail);
                showToast('TV Navigation Framework initialized!', 'success');
            });
            
            document.addEventListener('tv-nav-focus', function(e) {
                console.log('Focus changed to:', e.detail.element);
            });
            
            document.addEventListener('tv-nav-activate', function(e) {
                console.log('Element activated:', e.detail.element);
            });
            
            // Auto-focus first element after initialization
            setTimeout(() => {
                if (tvNav && tvNav.setFocus) {
                    const firstFocusable = document.querySelector('.tv-nav-focusable');
                    if (firstFocusable) {
                        console.log('Setting initial focus to:', firstFocusable);
                        tvNav.setFocus(firstFocusable);
                    } else {
                        console.warn('No focusable elements found');
                    }
                }
            }, 200);
        }

        // Theme switching function
        function changeTheme(themeClass) {
            const body = document.body;
            
            // Remove all existing theme classes
            const themeClasses = [
                'tv-nav-theme-netflix', 'tv-nav-theme-prime', 'tv-nav-theme-disney',
                'tv-nav-theme-hulu', 'tv-nav-theme-hbo', 'tv-nav-theme-youtube',
                'tv-nav-theme-playstation', 'tv-nav-theme-xbox', 'tv-nav-theme-nintendo',
                'tv-nav-theme-samsung', 'tv-nav-theme-lg', 'tv-nav-theme-retro',
                'tv-nav-theme-neon', 'tv-nav-theme-contrast-light', 'tv-nav-theme-contrast-dark'
            ];
            
            themeClasses.forEach(cls => body.classList.remove(cls));
            
            // Add new theme class if selected
            if (themeClass) {
                body.classList.add(themeClass);
                showToast(`Theme changed to: ${themeClass.replace('tv-nav-theme-', '')}`, 'info');
            } else {
                showToast('Theme reset to default', 'info');
            }
        }

        // Helper functions for demo interactions
        function showWelcomeMessage() {
            showToast('Welcome to the TV Navigation Framework Demo!', 'success', 4000);
            if (tvNav && tvNav.audioManager) {
                tvNav.audioManager.play('success');
            }
        }

        function showFeatureDemo() {
            const features = [
                'Directional navigation with arrow keys',
                'Gamepad support (Xbox/PlayStation)',
                'Audio feedback system',
                'On-screen keyboard',
                '15+ beautiful themes',
                'Accessibility features',
                'Bootstrap 5.3+ compatibility'
            ];
            
            let message = 'Key Features:\n' + features.join('\n• ');
            alert(message);
        }

        function showToast(message, type = 'info', duration = 3000) {
            if (tvNav && tvNav.showToast) {
                tvNav.showToast(message, type, duration);
            } else {
                // Create a simple fallback toast
                const toast = document.createElement('div');
                toast.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0,0,0,0.8);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    z-index: 9999;
                    backdrop-filter: blur(10px);
                `;
                toast.textContent = message;
                document.body.appendChild(toast);
                setTimeout(() => {
                    if (toast.parentNode) {
                        document.body.removeChild(toast);
                    }
                }, duration);
                console.log(`Toast: ${message} (${type})`);
            }
        }

        function showHelp() {
            if (tvNav && tvNav.showHelp) {
                tvNav.showHelp();
            } else if (tvNav && tvNav.toggleHelp) {
                tvNav.toggleHelp();
            } else {
                alert(`TV Navigation Help:

Navigation:
• Arrow Keys - Navigate between elements
• Enter/Space - Select/Activate element  
• Escape/Backspace - Go back
• F1 - Show/Hide help
• F10 - Show/Hide keyboard

Gamepad:
• D-Pad/Left Stick - Navigate
• A Button - Select
• B Button - Back
• Menu Button - Keyboard

Mouse/Touch:
• Click to focus and activate elements`);
            }
        }

        function toggleKeyboard() {
            if (tvNav && tvNav.toggleKeyboard) {
                tvNav.toggleKeyboard();
            } else {
                showToast('Keyboard feature not available', 'warning');
            }
        }

        function toggleAudio() {
            if (tvNav && tvNav.toggleAudio) {
                const enabled = tvNav.toggleAudio();
                showToast(`Audio ${enabled ? 'enabled' : 'disabled'}`, 'info');
                return enabled;
            } else {
                showToast('Audio toggle not available', 'warning');
                return false;
            }
        }

        function goHome() {
            if (tvNav && tvNav.goHome) {
                tvNav.goHome();
                showToast('Navigated to home', 'info');
            } else {
                // Fallback - focus first element and scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
                setTimeout(() => {
                    const firstFocusable = document.querySelector('.tv-nav-focusable');
                    if (firstFocusable) {
                        firstFocusable.focus();
                        firstFocusable.classList.add('tv-nav-focused');
                    }
                }, 500);
                showToast('Scrolled to top', 'info');
            }
        }

        // Demonstrate programmatic navigation
        function navigateToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
                const firstFocusable = section.querySelector('.tv-nav-focusable');
                if (firstFocusable && tvNav) {
                    setTimeout(() => tvNav.setFocus(firstFocusable), 500);
                }
            }
        }

        // Add keyboard shortcuts for demo
        document.addEventListener('keydown', function(e) {
            console.log('Key pressed:', e.key, 'Target:', e.target.tagName);
            
            // Don't interfere with framework's keyboard handling
            if (e.target.classList.contains('tv-nav-keyboard-input')) return;
            
            // Don't interfere with form inputs
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                return;
            }
            
            switch(e.key) {
                case '1':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        navigateToSection('features');
                    }
                    break;
                case '2':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        navigateToSection('navigation');
                    }
                    break;
                case '3':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        navigateToSection('components');
                    }
                    break;
                case '4':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        navigateToSection('forms');
                    }
                    break;
                case '5':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        navigateToSection('media');
                    }
                    break;
                case 't':
                    if (e.ctrlKey && e.shiftKey) {
                        e.preventDefault();
                        // Cycle through a few popular themes
                        const themeSelector = document.getElementById('themeSelector');
                        const currentIndex = themeSelector.selectedIndex;
                        const nextIndex = (currentIndex + 1) % Math.min(6, themeSelector.options.length);
                        themeSelector.selectedIndex = nextIndex;
                        changeTheme(themeSelector.value);
                    }
                    break;
                case 'h':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        showHelp();
                    }
                    break;
                case 'k':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        toggleKeyboard();
                    }
                    break;
            }
        });

        // Gamepad connection demo
        window.addEventListener('gamepadconnected', function(e) {
            showToast(`Gamepad connected: ${e.gamepad.id}`, 'success', 5000);
        });

        window.addEventListener('gamepaddisconnected', function(e) {
            showToast('Gamepad disconnected', 'warning', 3000);
        });

        // Performance monitoring
        let focusCount = 0;
        let navigationStartTime = performance.now();

        document.addEventListener('tv-nav-focus', function() {
            focusCount++;
        });

        // Show stats after some time
        setTimeout(() => {
            const elapsed = (performance.now() - navigationStartTime) / 1000;
            console.log(`Navigation stats: ${focusCount} focus events in ${elapsed.toFixed(1)} seconds`);
        }, 10000);

        // Add some demo data for forms
        function fillDemoData() {
            document.getElementById('username').value = 'demo_user';
            document.getElementById('email').value = 'user@example.com';
            document.getElementById('country').selectedIndex = 1;
            document.getElementById('bio').value = 'This is a demo profile for testing the TV Navigation Framework.';
            document.getElementById('notifications').checked = true;
            document.getElementById('premium').checked = true;
            showToast('Demo data filled!', 'success');
        }

        // Accessibility helpers
        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.className = 'sr-only';
            announcement.textContent = message;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        // Export functions for testing
        window.demoFunctions = {
            showWelcomeMessage,
            showFeatureDemo,
            showToast,
            showHelp,
            toggleKeyboard,
            toggleAudio,
            goHome,
            navigateToSection,
            changeTheme,
            fillDemoData,
            announceToScreenReader
        };

        // Add context menu for debugging (right-click)
        document.addEventListener('contextmenu', function(e) {
            if (e.ctrlKey) {
                e.preventDefault();
                const debugInfo = {
                    'Current Focus': tvNav?.getCurrentFocus()?.tagName || 'None',
                    'Focusable Elements': tvNav?.getFocusableElements()?.length || 0,
                    'Audio Enabled': tvNav?.audioManager?.enabled || false,
                    'Keyboard Visible': tvNav?.keyboardVisible || false,
                    'Theme': document.body.className.split(' ').find(c => c.startsWith('tv-nav-theme-')) || 'Default'
                };
                
                console.table(debugInfo);
                showToast('Debug info logged to console', 'info');
            }
        });
    </script>
</body>
</html>